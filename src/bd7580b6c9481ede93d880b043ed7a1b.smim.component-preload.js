//@ui5-bundle zhr237/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"zhr237/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","zhr237/model/models"],function(e,t,i){"use strict";return e.extend("zhr237.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device")}})});
},
	"zhr237/controller/App.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("zhr237.controller.App",{onInit(){}})});
},
	"zhr237/controller/CalendarBookingOverview.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,a,n,r){"use strict";return t.extend("zhr237.controller.CalendarBookingOverview",{_calendarData:{persons:[],specialDates:[]},constructor:function(e){this.owner=e;this.calendarModel=new a;this.calendarModel.setData(this._calendarData);this.calendar=this.owner.byId("bookingCalendar");this.calendar.setModel(this.calendarModel,"calendar")},refresh_calendar:function(){this.owner.getOwnerComponent().getModel().read("/ZC_HR237_Booking",{filters:this._getFilters(),success:function(t){this._calendarData.specialDates=[];const a={};for(const n of t.results){if(n.pernr==="88888888"){this._calendarData.specialDates.push({datum:n.datum,tooltip:`${e.date_to_text(n.datum)} - ${n.ename}`});continue}const t=a[n.pernr]?a[n.pernr]:{title:`${n.pernr.replace(/^0+/,"")} - ${n.ename}`,text:`${n.persa_txt} - ${n.department_txt}`,avatar:e.get_avatar_url(n.pernr,64),bookings:[],pernr:n.pernr};if(n.datum.getFullYear()!==9999){const e=this.geWholeDay(n.datum);t.bookings.push({startDate:e.low,endDate:e.high,title:n.layer_id,text:n.place_text,color:n.is_notified?"#A1FB8E":"#9CFFF5",_src:n})}a[n.pernr]=t}this._calendarData.persons=Object.values(a);this.calendarModel.updateBindings()}.bind(this)})},_getFilters:function(){const t=this.calendar.getViewKey()==="Week"?7:31;const a=this.owner.getView().byId("id_pers_area_filter").getSelectedKey();return[new n("pernr",r.EQ,"77777777"),new n("datum",r.EQ,e.getDateIso(e.get_noon(this.calendar.getStartDate()))),new n("filter_days_count",r.EQ,t),new n("persa",r.EQ,a?a:this.owner.pickedDesk?this.owner.pickedDesk.persa:"")]},showScheduleReport:function(){const t=this._getFilters().reduce((e,t)=>(e[t.sPath]=t.oValue1,e),{});window.open(e.get_base_url()+`ZC_HR237_A_Schedule_Report(begda=datetime'${t.datum}T00:00:00',persa='${t.persa}')/$value`)},geWholeDay:function(e){const t=new Date(e.getTime()+e.getTimezoneOffset()*6e4);const a=new Date(t.getTime());a.setDate(a.getDate()+1);return{low:t,high:a}}})});
},
	"zhr237/controller/ChartTab.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/viz/ui5/format/ChartFormatter","sap/viz/ui5/controls/common/feeds/FeedItem","sap/viz/ui5/data/MeasureDefinition"],function(e,t,r,i,a,n,o,s){"use strict";return t.extend("zhr237.controller.ChartTab",{owner:null,_chart:{_dynamics:[],_depart_items:[],_period_key:"WEEK",_orgeh_filter:"00000000",_periods:[{key:"DAY",value:"Day"},{key:"WEEK",value:"Week"},{key:"MONTH",value:"Month"},{key:"QUARTER",value:"Quarter"},{key:"YEAR",value:"Year"}]},constructor:function(e){this.owner=e;sap.ui.core.BusyIndicator.show(0);sap.ui.core.Fragment.load({id:e.getView().getId(),name:"zhr237.fragment.ChartTab",controller:this}).then(function(t){this._bindPopOver("frameDepart","popOverDynamics");this._bindPopOver("frameDynamics","popOverDepart");this.chartModel=new r;this.chartModel.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this.chartModel.setData(this._chart);t.setModel(this.chartModel,"chart");this._read_all_chart();e.getView().byId("chartVBox").addItem(t);sap.ui.core.BusyIndicator.hide()}.bind(this))},_bindPopOver:function(e,t){const r=this.owner.getView().byId(t);r.connect(this.owner.getView().byId(e).getVizUid())},_setMaxCapacityLine:function(e,t){const r=this.owner.getView().byId(e);const i=r.getVizProperties();const a=i.plotArea.referenceLine.line.valueAxis;const n=t.length>0;a[0].visible=n;a[0].value=n?Number(t[0].target_cnt):0;a[1].visible=n;a[1].value=n?t.reduce((e,t)=>e+Number(t.cnt),0)/t.length:0;a[1].label.text=`Average value ${Math.round(a[1].value*100)/100}`;if(n)i.plotArea.primaryScale.maxValue=Math.round(a[0].value*1.04);r.setVizProperties(i)},_fillDynamics:function(e){this._chart._dynamics=[];for(let t of e)this._chart._dynamics.push({period:t.period,period_raw:t.period_raw,cnt:Number(t.cnt),target_cnt:Number(t.target_cnt)});this._chart._dynamics.sort((e,t)=>e.period_raw>t.period_raw?1:-1);this._setMaxCapacityLine("frameDynamics",e)},_fillSplitByDeprtment:function(e){const t={};const r={};for(const i of e){const e=r[i.period]?r[i.period]:{period:i.period,period_raw:i.period_raw};r[i.period]=e;const a=`d${i.department}`;e[a]=(e[a]?e[a]:0)+Number(i.cnt);t[a]=i.department_txt}this._chart._depart_items=Object.values(r);this._chart._depart_items.sort((e,t)=>e.period_raw>t.period_raw?1:-1);const i=this.owner.getView().byId("frameDepart");const a=i.getFeeds();for(let e=1;e<a.length;e++)i.removeFeed(a[e]);const n=this.owner.getView().byId("datasetDepart");n.removeAllMeasures();const d=[];for(const e in t){const r=t[e];d.push(r);n.addMeasure(new s({value:`{chart>${e}}`,name:r}))}i.addFeed(new o({uid:"valueAxis",type:"Measure",values:d}))},_read_all_chart:function(){this.owner.getOwnerComponent().getModel().read("/ZC_HR237_Chart",{filters:[new i("period",a.EQ,this._chart._period_key),new i("department",a.EQ,this._chart._orgeh_filter)],urlParameters:{$select:"cnt,period,department,department_txt,chart_kind,target_cnt,period_raw"},success:function(e){this._fillDynamics(e.results.filter(e=>e.chart_kind==="dynamics_0"));this._fillSplitByDeprtment(e.results.filter(e=>e.chart_kind==="deprtment_1"));this.chartModel.updateBindings()}.bind(this)})}})});
},
	"zhr237/controller/DeskEdit.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,s,i){"use strict";return t.extend("zhr237.controller.DeskEdit",{owner:null,_desk:{},constructor:function(e){this.owner=e;this._model=new sap.ui.model.json.JSONModel;this._model.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this._model.setData(this._desk);this._dialog=sap.ui.xmlfragment("zhr237.fragment.DeskEdit",this);this._dialog.setModel(this._model,"desk");this.owner.getView().addDependent(this._dialog)},showDialog:function(e,t){this.layer_id=e;this._desk.place_text="";this._desk.department="";this.callBack=t;this.deskComboBox=sap.ui.getCore().byId("id_desk_combobox");this.deskComboBox.getBinding("items").filter([new s("layer_id",i.EQ,this.layer_id)]);this._model.updateBindings();this._dialog.open()},onSelectionChange:function(e){const t=e.getParameter("selectedItem");if(t)this._desk.department=t.getBindingContext().getObject().department},handleActionButton:function(t){const s=this.deskComboBox.getSelectedKey();const i=s?s:this.deskComboBox.getValue();const o=`${this.layer_id}-${i}`;if(!o||!o.match(/^[\s\S][\s\S]-\d+-\d+$/)){e.showMessage(`Desk number '${o}' is invalid`,true);return}if(this._desk.department===""){e.showMessage(`Please choose department`,true);return}const d=s==="";if(d&&t==="SAVE")e.showMessage(`Please set position for desk '${o}'`);t=d?"SET":t;this.callBack(t,d,{place_id:o,department:this._desk.department,place_text:i,orgtx:sap.ui.getCore().byId("id_desk_department").getSelectedItem().getBindingContext().getObject().orgtx});this._dialog.close()},handleEditCancelButton:function(){this._dialog.close()}})});
},
	"zhr237/controller/Details.js":function(){sap.ui.define(["zhr237/controller/Libs","zhr237/controller/NewBook","sap/ui/base/Object"],function(e,t,i){"use strict";return i.extend("zhr237.controller.Details",{owner:null,_detail:{},constructor:function(e){this.owner=e;this._model=new sap.ui.model.json.JSONModel;this._model.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this._model.setData(this._detail);this._popup=sap.ui.xmlfragment("zhr237.fragment.Details",this);this._popup.setModel(this._model,"detail");this.owner.getView().addDependent(this._popup)},showPopup:function(t){const i=t.getBindingContext("calendar").getObject()._src;e.copy_from(i,this._detail);this._detail._update_is_active=e.getDateIso(e.get_noon(this._detail.datum))>=e.getDateIso(e.get_noon(new Date));this._model.updateBindings();this._popup.openBy(t)},handleEditButton:function(){if(!this.owner._NewBook)this.owner._NewBook=new t(this.owner);this.owner._NewBook.showDialog(this.owner.userInfo,{pernr:this._detail.pernr,datum:this._detail.datum,layer_id:this._detail.layer_id,persa:this._detail.persa,layer_text:this._detail.layer_text,name1:this._detail.name1,place_id:this._detail.place_id,_change:true})},handleEditCancelButton:function(){this._dialog.close()},handlePopoverDeleteOrCancel:function(){if(!this._detail._update_is_active){this._popup.close();return}const t=this._detail;if(!this.oConfirmDialog){this.oConfirmDialog=new sap.m.Dialog({type:sap.m.DialogType.Message,title:"Confirm",content:new sap.m.Text({text:"Do you want to delete this booking?"}),beginButton:new sap.m.Button({type:sap.m.ButtonType.Emphasized,text:"Delete",press:function(){this.oConfirmDialog.close();this.owner.getView().getModel().remove(`/ZC_HR237_Booking(datum=datetime'${e.getDateIso(t.datum)}T00%3A00%3A00',pernr='${t.pernr}')`,{success:function(){e.showMessage(`Item ${t.place_id} for ${t.ename} at ${e.date_to_text(t.datum)} was successfully deleted`);this.owner.onStartDateChange()}.bind(this)})}.bind(this)}),endButton:new sap.m.Button({text:"Cancel",press:function(){this.oConfirmDialog.close()}.bind(this)})})}this.oConfirmDialog.open()}})});
},
	"zhr237/controller/FileUploadDialog.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/base/Object"],function(e,a){"use strict";return a.extend("zhr237.controller.FileUploadDialog",{owner:null,dialog:null,constructor:function(e){this.owner=e;this.dialog=sap.ui.xmlfragment("zhr237.fragment.FileUploadDialog",this);e.getView().addDependent(this.dialog)},show:function(e){this.layer_id=e;this.dialog.open()},handleCancelPress:function(e){this.dialog.close()},handleUploadComplete:function(a){var r=a.getParameters("response");const t=(new DOMParser).parseFromString(r.responseRaw,"text/xml");let o=false;let l="";try{l=t.getElementsByTagName("d:message")[0].childNodes[0].nodeValue;o=t.getElementsByTagName("d:is_error")[0].childNodes[0].nodeValue==="X"}catch(e){l=t.getElementsByTagName("message")[0].childNodes[0].nodeValue;o=true}e.showMessage(l,o)},handleUploadPress:function(){var e=sap.ui.getCore().byId("fupImport");var a="";var r=e.getValue();if(!r){a="Please select a file first";sap.m.MessageToast.show(a);return}this._addTokenToUploader();e.upload();this.dialog.close()},_addTokenToUploader:function(){var e=this.owner.getView().getModel();var a=e.getSecurityToken();var r=sap.ui.getCore().byId("fupImport");var t=new sap.ui.unified.FileUploaderParameter({name:"X-CSRF-Token",value:a});var o=new sap.ui.unified.FileUploaderParameter({name:"SLUG",value:this.layer_id+"|"+encodeURIComponent(r.getValue())});r.removeAllHeaderParameters();r.addHeaderParameter(t);r.addHeaderParameter(o);var l=e.sServiceUrl+"/ZC_HR237_Layer";r.setUploadUrl(l)}})});
},
	"zhr237/controller/FormLayer.js":function(){sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";return e.extend("zhr237.controller.FormLayer",{owner:null,_layer:{isNew:false,title:""},constructor:function(e){this.owner=e;this._model=new sap.ui.model.json.JSONModel;this._model.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this._model.setData(this._layer);this._dialog=sap.ui.xmlfragment("zhr237.fragment.FormLayer",this);this._dialog.setModel(this._model,"layer");this.owner.getView().addDependent(this._dialog)},popup:function(e,t,i){const l=t.split("^");this._layer.layer_id=e?"":l[0];this._layer.layer_text=e?"":l[1];this._layer.layer_address=e?"":l[2];this._layer.persa=e?"":l[3];this._layer.isNew=!this._layer.layer_id;this._layer.title=this._layer.isNew?"New layer":"Edit layer";this.callBack=i;this._model.updateBindings();this._dialog.open()},handleActionButton:function(){delete this._layer.isNew;delete this._layer.title;this.callBack(this._layer);this._dialog.close()},handleEditCancelButton:function(){this._dialog.close()}})});
},
	"zhr237/controller/GuardTab.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/base/Object","sap/m/Dialog","sap/m/Button","sap/m/Image","sap/m/HBox"],function(e,t,n,a,i,r){"use strict";return t.extend("zhr237.controller.GuardTab",{owner:null,constructor:function(t){this.owner=t;t.byId("idCheckBookingTable").attachBeforeRebindTable(function(t){const n=t.getParameter("bindingParams");e.addBindingListener(n,"dataReceived",this.onDataReceived.bind(this))}.bind(this));this.pernrFilter=t.byId("idCheckBookingFilter-filterItemControl_BASIC-pernr");this.basicFilter=t.byId("idCheckBookingFilter-btnBasicSearch");const n=t.byId("idCheckBookingFilter-filterItemControl_BASIC-datum");const a=t.byId("idCheckBookingFilter");n.setValueFormat("yyyy-MM-dd");n.setValueState("None");function i(t){n.setValue(e.getDateIso(e.get_noon(t)))}function r(){a.fireSearch()}i(new Date);r();sap.ui.require(["sap/ndc/BarcodeScannerButton"],function(t){const n=this.owner.byId("idCheckBookingToolbar");n.addContent(new t({dialogTitle:"Barcode Scanner",keepCameraScan:true,scanFail:function(t){e.showMessage("Scan failed: "+t,true)},scanSuccess:function(t){if(t.getParameter("cancelled")){e.showMessage("Scan cancelled",true);return}const n=t.getParameter("text");const a=n.split("-");if(n.length!==17||!e.isNumeric(n.replace("-",""))||a.length!==2||a[0].length!==8||a[1].length!==8){e.showMessage(`QR code ${n} is invalid`,true);return}this.basicFilter.setValue(a[1]);i(new Date(parseInt(a[0].substr(0,4)),parseInt(a[0].substr(4,2))-1,parseInt(a[0].substr(6,2))));r()}.bind(this)}))}.bind(this))},onDataReceived:function(t){const s=t.getParameter("data").results;if(s.length!==1||!this.basicFilter.getValue()&&!this.pernrFilter.getValue())return;const o=s[0];if(!this._avatarDialog)this._avatarDialog=new n({endButton:new a({text:"Cancel",press:function(){this._avatarDialog.close()}.bind(this)}),content:new r({justifyContent:"Center",items:new i})});this._avatarDialog.setTitle(`${o.ename} - ${o.place_text} - ${e.date_to_text(o.datum)}`);this._avatarDialog.getContent()[0].getItems()[0].setSrc(e.get_avatar_url(o.pernr,400));this._avatarDialog.open()}})});
},
	"zhr237/controller/Libs.js":function(){sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{getDateIso:function(e){const t=new Date(e.getTime()-e.getTimezoneOffset()*60*1e3);return t.toISOString().split("T")[0]},date_to_text:function(e){return e.toLocaleString("default",{month:"long",day:"numeric"})},copy_from:function(e,t){for(let e in t)if(t.hasOwnProperty(e))delete t[e];for(let n in e)if(e.hasOwnProperty(n)){t[n]=e[n]}},get_noon:function(e){if(!e)return null;e.setHours(12,0,0,0);return e},get_date_from_now:function(e){const t=this.get_noon(new Date);t.setDate(t.getDate()+e);return t},showMessage:function(t,n){e.show(t,{duration:3500});if(n)$(".sapMMessageToast").css("background","#cc1919")},get_avatar_url:function(e,t){const n=`${document.location.origin}/sap/opu/odata/sap/ZC_PY000_REPORT_CDS/ZC_PY000_PernrPhoto(pernr='${e}')/$value`;if(t)return`${n}?$filter=${encodeURIComponent(`img_size eq ${t}`)}`;return n},get_base_url:function(){return`${document.location.origin}/sap/opu/odata/sap/ZC_HR237_BOOKING_CDS/`},send_request:function(e,t){var n=new XMLHttpRequest;if(t)n.onreadystatechange=function(){if(n.readyState==4&&n.status==200)t(n.responseText)};n.open("GET",e,true);n.send(null)},isNumeric:function(e){if(typeof e!="string")return false;return!isNaN(e)&&!isNaN(parseFloat(e))},get_middle:function(e,t){return new Date((e.getTime()+t.getTime())/2)},addBindingListener:function(e,t,n){e.events=e.events||{};if(!e.events[t]){e.events[t]=n}else{var o=e.events[t];e.events[t]=function(){n.apply(this,arguments);o.apply(this,arguments)}}}}});
},
	"zhr237/controller/Main.controller.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/core/mvc/Controller","zhr237/controller/SchemaLayer","zhr237/controller/FormLayer","zhr237/controller/NewBook","zhr237/controller/CalendarBookingOverview","zhr237/controller/NotifyAll"],function(e,t,i,s,n,a,r){"use strict";return t.extend("zhr237.controller.Main",{onInit:function(){this._setMessageParser();this.mainView=this.byId("main_view");this.mainView.bindElement({path:"/ZC_HR237_CUR_USER('')",events:{dataReceived:function(){this.userInfo=this.mainView.getBindingContext().getObject();this.byId("avatar_big").setSrc(e.get_avatar_url(this.userInfo.pernr));this.byId("avatar_small").setSrc(e.get_avatar_url(this.userInfo.pernr),64)}.bind(this)}});this.calendarBookingOverview=new a(this)},onPick1Desk:function(t){const i=t.getSource();i.setPressed(false);this.pickedDesk=null;if(i.getText()){i.setText("");this.onStartDateChange();return}this.onBookClick({pickModeCallback:function(t){i.setPressed(true);i.setText(t.place_id);this.pickedDesk=t;this.onStartDateChange();e.showMessage(`Click on day in calendar to set ${t.place_id} desk`)}.bind(this)})},handleIntervalSelect:function(t){if(!this.pickedDesk)return;const i=t.mParameters.row.getBindingContext("calendar").getObject();const s={datum:e.get_middle(t.mParameters.startDate,t.mParameters.endDate),place_id:this.pickedDesk.place_id,pernr:i.pernr};this.createOrEdit(s)},createOrEdit:function(t,i,s){this.getView().getModel().create(i?"/ZC_HR237_A_Edit_Booking":"/ZC_HR237_Booking",t,{success:function(t){const i=!this.userInfo.is_manager;if(i)e.send_request(e.get_base_url()+`ZC_HR237_A_Send_Notif(datum=datetime'${e.getDateIso(t.datum)}T00:00:00',pernr='${t.pernr}')/$value`);e.showMessage(`Desk ${t.place_text} booked for ${e.date_to_text(t.datum)}`+(i?`\nNotification to ${t.ename} via email is sent`:""));this.onStartDateChange();if(s)s()}.bind(this)})},onSectionChange:function(e){switch(e.getParameter("section")){case this.byId("bookingTab"):this.onStartDateChange();return;case this.byId("guardTab"):this._init_guard_tab();return;case this.byId("chartTab"):this._init_chart_tab();return;case this.byId("notifTab"):r.init_notif_tab(this);return;case this.byId("settingsTab"):this.byId("id_settings_table").rebindTable();return}},onNotifyAll:function(){r.send(this)},showScheduleReport:function(){this.calendarBookingOverview.showScheduleReport()},onBeforeRebindNotifyAllTable:function(e){r.onBeforeRebindNotifyAllTable(e)},onStartDateChange:function(){this.calendarBookingOverview.refresh_calendar();this.mainView.getObjectBinding().refresh()},_init_guard_tab:function(){sap.ui.core.BusyIndicator.show(0);sap.ui.require(["zhr237/controller/GuardTab"],function(e){sap.ui.core.BusyIndicator.hide();if(!this._GuardTab)this._GuardTab=new e(this)}.bind(this))},_init_chart_tab:function(){sap.ui.core.BusyIndicator.show(0);sap.ui.require(["zhr237/controller/ChartTab"],function(e){sap.ui.core.BusyIndicator.hide();if(!this._ChartTab)this._ChartTab=new e(this)}.bind(this))},uploadImage:function(e){const t=e.getSource().getProperty("target");sap.ui.require(["zhr237/controller/FileUploadDialog"],function(e){if(!this._fileUploadDialog)this._fileUploadDialog=new e(this);this._fileUploadDialog.show(t)}.bind(this))},_setMessageParser:function(){const e=this.getOwnerComponent().getModel();sap.ui.require(["zhr237/controller/MessageParser"],function(t){const i=new t(e.sServiceUrl,e.oMetadata,!!e.bPersistTechnicalMessages);e.setMessageParser(i)})},onEditDeskPosition:function(e){sap.ui.core.BusyIndicator.show(0);if(!this._schemaLayer)this._schemaLayer=new i(this);sap.ui.core.BusyIndicator.hide();this._schemaLayer.display(e.getSource().getProperty("target"))},handleFormClick:function(t,i,n){const a=n==="NEW";let r;switch(i){case"Layer":r=new s(this);break}const o=`${i.toLowerCase()}_id`;r.popup(a,a?"":t.getSource().getTarget(),function(t){const s=a?"create":"update";const n=`/ZC_HR237_${i}${a?"":`('${t[o]}')`}`;this.getView().getModel()[s](n,t,{success:function(){e.showMessage.show(`${i} ${t[o]} was successfully ${s}ed`)}.bind(this)})}.bind(this))},onBookClick:function(t){if(!this._NewBook)this._NewBook=new n(this);const i=e.get_noon(new Date);i.setDate(i.getDate()+1);this._NewBook.showDialog(this.userInfo,{datum:i,pernr:this.userInfo.pernr,layer_id:"-",persa:"-",layer_text:"Select Schema",pickModeCallback:t.pickModeCallback})},handleAppointmentSelect:function(e){const t=e.getParameter("appointment");if(!t)return;sap.ui.require(["zhr237/controller/Details"],function(e){if(!this.details)this.details=new e(this);this.details.showPopup(t)}.bind(this))},handleSupportEmail:function(){sap.m.URLHelper.triggerEmail(this.userInfo.support_email,this.userInfo.support_subject,this.userInfo.support_body)},showQrCode:function(){window.open(e.get_base_url()+`ZC_HR237_A_Show_Ticket(datum=datetime'${e.getDateIso(this.userInfo.nearest_book_date)}T00:00:00',pernr='${this.userInfo.pernr}')/$value`)}})});
},
	"zhr237/controller/MessageParser.js":function(){sap.ui.define(["zhr237/controller/Libs","sap/ui/model/odata/ODataMessageParser"],function(e,s){"use strict";return s.extend("zhr237.ext.controller.MessageParser",{parse:function(r,t,n,o,a){var i=this;s.prototype.parse.apply(i,arguments);if(r.statusCode<400||r.statusCode>=600)return;const u={request:t,response:r,url:t.requestUri};const c=this._parseBody(r,u);const p=[];const d=[];for(let e of c){if(e.message.indexOf("An exception was raised")===-1&&e.message.indexOf("In the context of Data Services an unknown internal server error occurred")===-1)p.push(e.message);d.push(e.type)}if(p.length===0)return;e.showMessage(p.join("\n"),d.indexOf("Error")>=0)}})});
},
	"zhr237/controller/NewBook.js":function(){sap.ui.define(["zhr237/controller/Libs","zhr237/controller/SchemaLayer","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,i,s){"use strict";return o.extend("zhr237.controller.NewBook",{owner:null,_book:{},constructor:function(e){this.owner=e;this._model=new sap.ui.model.json.JSONModel;this._model.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this._model.setData(this._book);this._dialog=sap.ui.xmlfragment("zhr237.fragment.NewBook",this);this._dialog.setModel(this._model,"book");this.owner.getView().addDependent(this._dialog)},showDialog:function(t,o){this.userInfo=t;this.previous_values=o;e.copy_from(o,this._book);this._book.minDate=e.get_date_from_now(t.min_date);this._book.maxDate=e.get_date_from_now(t.max_date);this._book.is_admin=t.is_admin;this._book.is_manager=t.is_manager&&!t.is_admin;this.layerCombobox=sap.ui.getCore().byId("id_new_layer_id");this.pernrCombobox=sap.ui.getCore().byId("id_new_book_pernr");this.desksCombobox=sap.ui.getCore().byId("id_new_book_desk");if(!this._book._change){this.layerCombobox.setSelectedKey(null);this.desksCombobox.setSelectedKey(null)}if(!this._book._change&&(t.is_manager||t.is_admin))this.pernrCombobox.setSelectedKey(null);this._update_bindings();this._model.updateBindings();this._dialog.open();if(this._book._change){this.layerCombobox.setSelectedKey(this._book.layer_id);this._on_schema_combobox_changed({oSource:this.layerCombobox,_layerObject:this.owner.getView().getModel().getProperty(`/ZC_HR237_Layer('${this._book.layer_id}')`)})}},_onAfterDialogOpen:function(){if(this.previous_values.pickModeCallback)return;const e=this._book._change?this._book.pernr:"";sap.ui.getCore().byId("id_pernr_4_booking").setValue(e);sap.ui.getCore().byId("id_pernr_4_booking-input").setValue(e)},_update_bindings:function(){this.pernrCombobox.getBinding("items").filter([new i("persa",s.EQ,this._book.persa)]);this.owner.getOwnerComponent().getModel().read("/ZC_HR237_Booking",{filters:this._make_default_filter(new i("datum",s.EQ,e.getDateIso(e.get_noon(this._book.datum)))),urlParameters:{$select:"place_id"+",pernr,ename,user_name,created_when"},success:function(e){if(this.previous_values._change)e.results=e.results.filter(e=>e.place_id!==this.previous_values.place_id);this._skip_desks=e.results;const t=this._make_default_filter();for(let e of this._skip_desks)t.push(new i("place_id",s.NE,e.place_id));this.desksCombobox.getBinding("items").filter(t)}.bind(this)})},pernrSelectedByCombo:function(e){if(!e.getSource().getSelectedKey())return;const t=e.getSource().getSelectedItem().getBindingContext().getObject();this._book.pernr=t.pernr;this._book.department=t.department;this._update_bindings()},pernrSelectedByF4:function(e){this._book.pernr=e.getParameter("value");this._book.department=this.owner.getView().getModel().getProperty(`/ZC_HR237_OrgAssignment('${this._book.pernr}')`).department;this._update_bindings()},_make_default_filter:function(e){const t=e?[e]:[];if(this._book.layer_address)t.push(new i("layer_id",s.EQ,this._book.layer_id));const o=this._book.department?this._book.department:this._book.is_admin?null:this.userInfo.department;if(o)t.push(new i("department",s.EQ,o));return t},_on_schema_combobox_changed:function(e){if(!e.oSource.getSelectedKey())return;const t=e._layerObject?e._layerObject:e.oSource.getSelectedItem().getBindingContext().getObject();this._book.layer_id=t.layer_id;this._book.layer_text=t.layer_text;this._book.layer_address=t.layer_address;this._book.persa=t.persa;this._book.name1=t.name1;this._update_bindings()},onDateChanged:function(e){if(e&&!e.getParameter("valid"))return;this._update_bindings()},handleActionButton:function(){const t={datum:e.get_noon(this._book.datum),place_id:this.desksCombobox.getSelectedKey(),pernr:this.previous_values.pickModeCallback?this._book.layer_address:this._book.pernr};if(!t.pernr||!t.place_id||!this._book.datum){e.showMessage("Fill all required fields",true);return}if(this.previous_values.pickModeCallback){this.previous_values.pickModeCallback({place_id:t.place_id,persa:this._book.persa});this._dialog.close();return}if(this.previous_values._change){t.datum_prev=this.previous_values.datum;t.pernr_prev=this.previous_values.pernr;t.place_id_prev=this.previous_values.place_id}this.owner.createOrEdit(t,this._book._change,function(){this._dialog.close()}.bind(this))},onShowMap:function(){if(!this._book.layer_address){e.showMessage("Please select schema",true);return}window.open(`https://www.google.com/maps/place/${encodeURIComponent(this._book.layer_address)}`,"_blank").focus()},onWhatchSchema:function(){if(!this._book.layer_address){e.showMessage("Please select schema",true);return}sap.ui.core.BusyIndicator.show(0);if(!this.owner._schemaLayer)this.owner._schemaLayer=new t(this.owner);sap.ui.core.BusyIndicator.hide();const o=this._make_default_filter();this.owner._schemaLayer.display(`${this._book.layer_id}^${this._book.layer_text}`,{addFilter:o,skip_desks:this._skip_desks,callBack:function(e){this.desksCombobox.setSelectedKey(e)}.bind(this)})},handleEditCancelButton:function(){this._dialog.close()}})});
},
	"zhr237/controller/NotifyAll.js":function(){sap.ui.define(["zhr237/controller/Libs"],function(e){"use strict";return{init_notif_tab:function(e){this.owner=e;e.getView().byId("idNotifyAllTable").rebindTable()},onBeforeRebindNotifyAllTable:function(e){const i=e.getParameter("bindingParams");if(this._is_not_notified())i.filters.push(new sap.ui.model.Filter("is_notified","EQ",false))},_is_not_notified:function(){return!this.owner.getView().byId("id_is_notified").getState()},send:function(){const i=this.owner.getView().byId("idNotifyAllTableInner").getBinding("items").sFilterParams;this.owner.getView().getModel().read("/ZC_HR237_A_Send_Notif_All",{urlParameters:{$filter:decodeURIComponent(i).replace("$filter=","")+` and action ne 'NOTIFY_ALL'`},success:function(){e.showMessage(`All employees have been notified`);this.init_notif_tab(this.owner)}.bind(this)})}}});
},
	"zhr237/controller/SchemaLayer.js":function(){sap.ui.define(["zhr237/controller/Libs","zhr237/controller/DeskEdit","sap/ui/base/Object","sap/suite/ui/commons/networkgraph/layout/NoopLayout","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,s,n,o){"use strict";return i.extend("zhr237.controller.SchemaLayer",{owner:null,_item:{title:"",editMode:false,nodes:[],rooms:[]},constructor:function(e){this.owner=e;this._model=new sap.ui.model.json.JSONModel;this._model.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this._model.setData(this._item)},display:function(e,t){this.ext=t?t:{};const i=e.split("^");const n=i[0];const o=i[1];this.layer_id=n;this._item.editMode=!this.ext.addFilter;this._item.chooseText="Choose desk";this._item.chooseEnabled=false;this._item.title=`${this._item.editMode?"Edit desks":"Choose desk"} of ${o} (${n})`;if(!this._dialog){this._dialog=sap.ui.xmlfragment("zhr237.fragment.SchemaLayer",this);this._dialog.setModel(this._model,"item");this.owner.getView().addDependent(this._dialog);this._graph=sap.ui.getCore().byId("graph");this._graph.setLayoutAlgorithm(new s)}this.fillAndShow(n)},fillAndShow:function(e){for(let e of this._graph.getNodes().filter(e=>e.getSelected()))e.setSelected(false);this._item.nodes=[];this._item.rooms=[];let t=[new n("layer_id",o.EQ,e),new n("place_x",o.NE,0),new n("place_y",o.NE,0)];if(this.ext&&this.ext.addFilter)t=[...t,...this.ext.addFilter];this.owner.getOwnerComponent().getModel().read("/ZC_HR237_Place",{filters:t,urlParameters:{$select:`place_id,place_text,place_x,place_y,orgtx`},success:function(t){if(this.ext&&this.ext.skip_desks)for(let e of this.ext.skip_desks){let i=t.results.find(t=>t.place_id===e.place_id);if(i){i.pernr=e.pernr;i.ename=e.ename;i.user_name=e.user_name;i.created_when=e.created_when}}for(let e of t.results)this._add1Desk(e);if(t.results.length===0)this._add1Desk({place_id:999,place_text:"",place_x:1,place_y:1,orgtx:""});this._model.updateBindings();const i=`${window.location.origin}/sap/opu/odata/sap/ZC_HR237_BOOKING_CDS/ZC_HR237_Layer('${e}')/`+encodeURIComponent("$value");this.toDataURL(i,function(e){this._graph.setBackgroundImage(e)}.bind(this));this._dialog.open()}.bind(this)})},toDataURL:function(e,t){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)};e.readAsDataURL(i.response)};i.open("GET",e);i.responseType="blob";i.send()},_add1Desk:function(e,t){for(let i=0;i===0;i++){if(!t)break;const i=this._item.nodes.filter(t=>t.key===e.place_id)[0];if(!i)break;if(e.place_x&&e.place_y){i.x=e.place_x;i.y=e.place_y}i.title=`${e.place_text}`;return}this._item.nodes.push({key:e.place_id,title:`${e.place_text}`,x:e.place_x,y:e.place_y,status:e.ename?"Error":"Success",attributes:e.ename?[{label:e.pernr,value:e.ename},{label:e.created_when.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:false}),value:e.user_name}]:null})},_onAfterDialogOpen:function(){const e=sap.ui.getCore().byId("graph-toolbar");for(let t of e.getContent())try{switch(t.getTooltip()){case"Zoom to Fit":t.firePress();break;case"Enter Full Screen":t.setVisible(false);break}}catch(e){console.error(e)}document.getElementById("graph-innerscroller").addEventListener("click",this._onClick.bind(this))},handleEditDesk:function(){if(!this._DeskEdit)this._DeskEdit=new t(this.owner);this.current_desk=null;this._DeskEdit.showDialog(this.layer_id,function(e,t,i){this.current_desk_new=t;this.current_desk=i;if(e==="SAVE")this._doSave()}.bind(this))},_doSave:function(){const t=this.current_desk_new?"create":"update";const i="/ZC_HR237_Place"+(this.current_desk_new?"":`('${this.current_desk.place_id}')`);const s=this.current_desk;this.current_desk=null;const n={...s};delete n.place_text;delete n.orgtx;const o=this;this.owner.getView().getModel()[t](i,n,{success:function(i){i=i?i:s;e.showMessage(`Desk ${i.place_id} was successfully ${t}ed`);o._add1Desk(i,true);o._model.updateBindings()}})},_onClick:function(e){if(!this.current_desk)return;const t=e.target.getBoundingClientRect();const i=this._graph.getCurrentZoomLevel();this.current_desk.place_x=Math.round((e.clientX-t.left)/i)-50;this.current_desk.place_y=Math.round((e.clientY-t.top)/i);this._doSave()},handleEditCancelButton:function(){this._dialog.close()},onSelectionChange:function(){const e=this._graph.getNodes().filter(e=>e.getSelected());const t=e.length===1&&e[0].getStatus()==="Success"?e[0]:null;this._item.chooseText=t?`Choose desk '${t.getKey().substr(3)}'`:"Choose desk";this._item.chooseEnabled=!!t;this.ext.selected_place_id=t?t.getKey():null;this._model.updateBindings()},handleDeskChoosed:function(){if(!this.ext.selected_place_id)return;this.ext.callBack(this.ext.selected_place_id);this._dialog.close()},_doAlign:function(){const t=this._graph.getNodes().filter(e=>e.getSelected()).map(e=>({place_id:e.getKey(),place_x:e.getX(),place_y:e.getY()}));if(t.length<2){e.showMessage("Select more items",true);return}const i=this.getStandardDeviation(t,"place_x");const s=this.getStandardDeviation(t,"place_y");if(i.deviation>=7&&s.deviation>=7){e.showMessage("Deviation is too big",true);return}const n=i.deviation>s.deviation?s:i;for(let e of t){e[n.field]=n.mean;this.owner.getView().getModel().update(`/ZC_HR237_Place('${e.place_id}')`,e)}e.showMessage(`${t.length} items aligned`);this._graph.deselect()},getStandardDeviation:function(e,t){const i=e.length;const s=e.reduce((e,i)=>e+i[t],0)/i;return{deviation:Math.sqrt(e.map(e=>Math.pow(e[t]-s,2)).reduce((e,t)=>e+t)/i),mean:Math.round(s),field:t}}})});
},
	"zhr237/fragment/ChartFilters.fragment.xml":'<core:FragmentDefinition\r\n\txmlns="sap.m"\r\n\txmlns:core="sap.ui.core"><HBox><Select items="{chart>/_periods}"\r\n                    selectedKey="{chart>/_period_key}"\r\n                    change="_read_all_chart"><core:Item key="{chart>key}" text="{chart>value}" /></Select><Button enabled="false"/><ComboBox\r\n            selectedKey="{chart>/_orgeh_filter}"\r\n            items="{ path: \'/ZC_HR237_Department\',\r\n                filters: [{\r\n                    path: \'place_count\',\r\n                    operator: \'GT\',\r\n                    value1: \'0\'\r\n                }] }"\r\n            selectionChange="_read_all_chart"><core:Item key="{orgeh}" text="{orgtx}" /></ComboBox></HBox></core:FragmentDefinition>',
	"zhr237/fragment/ChartTab.fragment.xml":'<core:FragmentDefinition\r\n\txmlns="sap.suite.ui.commons"\r\n\txmlns:m="sap.m"\r\n\txmlns:mvc="sap.ui.core.mvc"\r\n\r\n\txmlns:viz="sap.viz.ui5.controls"\t\r\n\txmlns:vizData="sap.viz.ui5.data"\r\n\txmlns:vizFeeds="sap.viz.ui5.controls.common.feeds"\r\n\t\r\n\txmlns:layout="sap.ui.layout"\r\n\txmlns:core="sap.ui.core"><layout:Splitter width="100%" height="100%"><layout:contentAreas><ChartContainer\r\n\t\t\t\tshowFullScreen="true"\r\n\t\t\t\tshowPersonalization="false"\r\n\t\t\t\tautoAdjustHeight="true"\r\n\t\t\t\tshowSelectionDetails="false"\r\n\t\t\t\tshowLegendButton="false"\r\n\t\t\t\ttitle="------"><dimensionSelectors><core:Fragment fragmentName="zhr237.fragment.ChartFilters" type="XML"/></dimensionSelectors><content><ChartContainerContent><content><viz:Popover id="popOverDynamics"></viz:Popover><viz:VizFrame id="frameDynamics"\r\n\t\t\t\t\t\t\t              height="40rem" width="auto"\r\n\t\t\t\t\t\t\t              uiConfig="{applicationSet:\'fiori\'}"\r\n\t\t\t\t\t\t\t\t\t\t  vizProperties="{\r\n\t\t\t\t\t\t\t\t\t\t\tplotArea:{\r\n\t\t\t\t\t\t\t\t\t\t\t\tprimaryScale: { fixedRange: true, maxValue: 20 },\r\n\t\t\t\t\t\t\t\t\t\t\t\treferenceLine: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tline: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimaryValues: [{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 9,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \'Max. capacity\',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: \'sapUiNegativeElement\'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'sapUiNegativeElement\'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 4,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \'Average value\',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: \'sapUiCriticalElement\'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'sapUiCriticalElement\'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tdataLabel:{visible: true},\r\n\t\t\t\t\t\t\t\t\t\t\t\tdrawingEffect: \'glossy\'\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t  \ttitle: {text : \'General Booking dynamics\', visible : true}\r\n\t\t\t\t\t\t\t\t\t\t  }"\r\n\t\t\t\t\t\t\t\t\t\t  vizType="column"\r\n\t\t\t\t\t\t\t\t\t\t  ><viz:dataset><vizData:FlattenedDataset data="{chart>/_dynamics}"><vizData:dimensions><vizData:DimensionDefinition name="Period" value="{chart>period}"/></vizData:dimensions><vizData:measures><vizData:MeasureDefinition name="Bookings count" value="{chart>cnt}"/></vizData:measures></vizData:FlattenedDataset></viz:dataset><viz:feeds><vizFeeds:FeedItem uid="primaryValues" type="Measure" values="Bookings count"/><vizFeeds:FeedItem uid="axisLabels" type="Dimension" values="Period"/></viz:feeds></viz:VizFrame></content></ChartContainerContent></content></ChartContainer><ChartContainer\r\n\t\t\t\tshowFullScreen="true"\r\n\t\t\t\tshowPersonalization="false"\r\n\t\t\t\tautoAdjustHeight="true"\r\n\t\t\t\tshowSelectionDetails="false"\r\n\t\t\t\tshowLegendButton="true"\r\n\t\t\t\ttitle="------"><dimensionSelectors><core:Fragment fragmentName="zhr237.fragment.ChartFilters" type="XML"/></dimensionSelectors><content><ChartContainerContent><content><viz:Popover id="popOverDepart"></viz:Popover><viz:VizFrame id="frameDepart"\r\n\t\t\t\t\t\t\t\t\t\t  height="40rem" width="auto"\r\n\t\t\t\t\t\t\t              uiConfig="{applicationSet:\'fiori\'}"\r\n\t\t\t\t\t\t\t\t\t\t  vizProperties="{\r\n\t\t\t\t\t\t\t\t\t\t\tplotArea:{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdataLabel:{visible: true},\r\n\t\t\t\t\t\t\t\t\t\t\t\tdrawingEffect: \'glossy\'\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t  \ttitle: {text : \'By department\', visible : true},\r\n\t\t\t\t\t\t\t\t\t\t\tvalueAxis: { title: { text: \'Bookings count\' } }\r\n\t\t\t\t\t\t\t\t\t\t  }"\r\n\t\t\t\t\t\t\t\t\t\t  vizType="stacked_column"\r\n\t\t\t\t\t\t\t\t\t\t  ><viz:dataset><vizData:FlattenedDataset id="datasetDepart" data="{chart>/_depart_items}"><vizData:dimensions><vizData:DimensionDefinition name="Period" value="{chart>period}"/></vizData:dimensions><vizData:measures></vizData:measures></vizData:FlattenedDataset></viz:dataset><viz:feeds><vizFeeds:FeedItem uid="categoryAxis" type="Dimension" values="Period"/></viz:feeds></viz:VizFrame></content></ChartContainerContent></content></ChartContainer></layout:contentAreas></layout:Splitter></core:FragmentDefinition>',
	"zhr237/fragment/DeskEdit.fragment.xml":'<core:FragmentDefinition\r\n\t\txmlns="sap.m"\r\n\t\txmlns:l="sap.ui.layout"\r\n\t\txmlns:f="sap.ui.layout.form"\r\n\t\txmlns:core="sap.ui.core"><Dialog title="Create or Edit desk" afterOpen="_onAfterDialogOpen"><buttons><Button text="Save" type="Emphasized" press=".handleActionButton(\'SAVE\')"/><Button text="Set position in map" press="handleActionButton(\'SET\')"/><Button text="Cancel" press="handleEditCancelButton"/></buttons><l:VerticalLayout\r\n\t\t\t\tclass="sapUiContentPadding"\r\n\t\t\t\twidth="100%"><f:SimpleForm\r\n\t\t\t\t\teditable="true"\r\n\t\t\t\t\tlayout="ResponsiveGridLayout"\r\n\t\t\t\t\tsingleContainerFullSize="false"><Label text="Desk"/><ComboBox\r\n\t\t\t\t    id="id_desk_combobox"\r\n                    value="{desk>/place_text}"\r\n\t\t\t\t\trequired="true"\r\n                    items="{/ZC_HR237_Place}"\r\n\t\t\t\t\tselectionChange="onSelectionChange"><core:Item key="{place_text}" text="{place_text} - {orgtx}" /></ComboBox><Label text="Department"/><ComboBox\r\n\t\t\t\t    id="id_desk_department"\r\n                    selectedKey="{desk>/department}"\r\n\t\t\t\t\trequired="true"\r\n                    items="{/ZC_HR237_Department}"><core:Item key="{orgeh}" text="{orgeh} - {orgtx}" /></ComboBox></f:SimpleForm></l:VerticalLayout></Dialog></core:FragmentDefinition>',
	"zhr237/fragment/Details.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core"><ResponsivePopover title="{detail>/layer_text} ({detail>/layer_id})" class="sapUiResponsivePadding--header" placement="Auto"><beginButton><Button text="Edit" type="Emphasized" press="handleEditButton" visible="{detail>/_update_is_active}"/></beginButton><endButton><Button text="{= ${detail>/_update_is_active}?\'Delete\':\'Cancel\'}" press="handlePopoverDeleteOrCancel"/></endButton><f:SimpleForm editable="false" layout="ResponsiveGridLayout" singleContainerFullSize="false"><Label text="Booking date"/><Text text="{ path: \'detail>/datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\', UTC: true } }" /><Label text="Personnel Number"/><Text text="{path : \'detail>/pernr\', type : \'sap.ui.model.odata.type.String\', constraints : {isDigitSequence : true, maxLength : 8 }}" /><Label text="Employee Name" labelFor="moreInfo" /><Text text="{detail>/ename}" /><Label text="Desk" /><Text text="{detail>/place_text}" /><Label text="Created by" /><Text text="{detail>/user_name} at { path: \'detail>/created_when\', type: \'sap.ui.model.type.Time\', formatOptions: { pattern: \'dd.MM.yyyy HH:mm:ss\', UTC: true } }" /></f:SimpleForm></ResponsivePopover></core:FragmentDefinition>\n',
	"zhr237/fragment/FileUploadDialog.fragment.xml":'<core:FragmentDefinition\r\n            xmlns="sap.m"\r\n            xmlns:form="sap.ui.layout.form"\r\n            xmlns:core="sap.ui.core"            \r\n            xmlns:u="sap.ui.unified"><Dialog class="sapUiPopupWithPadding" title="Import from Excel" resizable="false" draggable="false" showHeader="false" horizontalScrolling="false"><content><form:SimpleForm title="Upload"><form:content><u:FileUploader id="fupImport" name="myFileUpload" tooltip="Upload (*.*)" uploadComplete="handleUploadComplete" style="Emphasized" placeholder="Choose a file for Upload (*.*)" sendXHR="true" useMultipart="false" /></form:content></form:SimpleForm></content><buttons><Button text="Upload File" type="Emphasized" id="btnUpload" press="handleUploadPress" /><Button text="Cancel" type="Emphasized" id="btnCancel" press="handleCancelPress" /></buttons></Dialog></core:FragmentDefinition>\r\n',
	"zhr237/fragment/FormLayer.fragment.xml":'<core:FragmentDefinition\r\n\t\txmlns="sap.m"\r\n\t\txmlns:l="sap.ui.layout"\r\n\t\txmlns:f="sap.ui.layout.form"\r\n\t\txmlns:core="sap.ui.core"><Dialog title="{layer>/title}" afterOpen="_onAfterDialogOpen"><beginButton><Button text="Ok" type="Emphasized" press="handleActionButton"/></beginButton><endButton><Button text="Cancel" press="handleEditCancelButton"/></endButton><l:VerticalLayout\r\n\t\t\t\tclass="sapUiContentPadding"\r\n\t\t\t\twidth="100%"><f:SimpleForm\r\n\t\t\t\t\teditable="true"\r\n\t\t\t\t\tlayout="ResponsiveGridLayout"\r\n\t\t\t\t\tsingleContainerFullSize="false"><Label text="Layer"/><Input value="{layer>/layer_id}"\r\n\t\t\t\t\t   editable="{layer>/isNew}"\r\n\t\t\t\t\t   required="true"/><Label text="Layer text"/><Input value="{layer>/layer_text}"\r\n                       maxLength="100"\r\n\t\t\t\t\t   required="true"/><Label text="Layer address"/><Input value="{layer>/layer_address}"\r\n                       maxLength="255"\r\n\t\t\t\t\t   required="true"/><Label text="Personnel area"/><ComboBox\r\n                    selectedKey="{layer>/persa}"\r\n\t\t\t\t\trequired="true"\r\n                    items="{\r\n                        path: \'/ZC_PY000_PersonnelArea\',\r\n                        sorter: { path: \'persa\' }\r\n                    }"><core:Item key="{persa}" text="{persa} - {name1}" /></ComboBox></f:SimpleForm></l:VerticalLayout></Dialog></core:FragmentDefinition>',
	"zhr237/fragment/NewBook.fragment.xml":'<core:FragmentDefinition\r\n\t\txmlns="sap.m"\r\n\t\txmlns:l="sap.ui.layout"\r\n\t\txmlns:f="sap.ui.layout.form"\r\n\t\txmlns:core="sap.ui.core"\r\n\t\txmlns:smartField="sap.ui.comp.smartfield"><Dialog title="{book>/layer_text} ({book>/layer_id}) - {book>/name1} ({book>/persa})" afterOpen="_onAfterDialogOpen"><buttons><Button text="{= ${book>/_change} ? \'Change\': ${book>/pickModeCallback} ? \'Pick\' : \'Create\'}" type="Emphasized" press="handleActionButton"/><Button text="Cancel" press="handleEditCancelButton"/></buttons><l:VerticalLayout\r\n\t\t\t\tclass="sapUiContentPadding"\r\n\t\t\t\twidth="100%"><f:SimpleForm\r\n\t\t\t\t\teditable="true"\r\n\t\t\t\t\tlayout="ResponsiveGridLayout"\r\n\t\t\t\t\tsingleContainerFullSize="false"><Label text="Date"/><DatePicker required="true"\r\n                            value="{ path: \'book>/datum\', type: \'sap.ui.model.type.Date\', formatOptions: { pattern: \'dd.MM.yyyy\', UTC: true } }"\r\n                            minDate="{book>/minDate}"\r\n\t\t\t\t\t\t\tmaxDate="{book>/maxDate}"\r\n                            change="onDateChanged"/><Label text="Schema"/><ComboBox\r\n\t\t\t\t    id="id_new_layer_id"\r\n                    selectedKey="{book>/layer_id}"\r\n\t\t\t\t\trequired="true"\r\n                    items="{/ZC_HR237_Layer}"\r\n\t\t\t\t\tselectionChange="_on_schema_combobox_changed"\r\n                    ><core:Item key="{layer_id}" text="{layer_id} - {layer_text}" /></ComboBox><Label text="Employee" visible="{= !${book>/pickModeCallback} &amp;&amp; ( ${book>/is_admin} || ${book>/is_manager} ) }"/><ComboBox                \r\n                    id="id_new_book_pernr"\r\n                    selectedKey="{book>/pernr}"\r\n\t\t\t\t\trequired="true"\r\n                    items="{path : \'/ZC_HR237_OrgAssignment\', length: \'3333\'}"\t\t\t\t\t \r\n                    visible="{= !${book>/pickModeCallback} &amp;&amp; ${book>/is_manager} }"\r\n\t\t\t\t\tselectionChange="pernrSelectedByCombo"><core:Item key="{pernr}" text="{pernr} - {ename}" /></ComboBox><smartField:SmartField id="id_pernr_4_booking"\r\n\t\t\t\t\t\t\t\t\t   textInEditModeSource="ValueList"\r\n\t\t\t\t\t\t\t\t\t   value="{pernr}"\r\n\t\t\t\t\t\t\t\t\t   mandatory="true"\r\n\t\t\t\t\t\t\t\t\t   entitySet="ZC_HR237_Booking"\r\n\t\t\t\t\t\t\t\t\t   visible="{= !${book>/pickModeCallback} &amp;&amp; ${book>/is_admin} }"\r\n\t\t\t\t\t\t\t\t\t   change="pernrSelectedByF4"></smartField:SmartField><Label text="Desk"/><HBox width="100%"><ComboBox\r\n\t\t\t\t    id="id_new_book_desk"\r\n                    selectedKey="{book>/place_id}"\t\t\t\t\t\r\n\t\t\t\t\trequired="true"\r\n                    items="{/ZC_HR237_Place}"\r\n                    ><core:Item key="{place_id}" text="{place_text} - {orgtx}" /></ComboBox><Button text="Show desks" icon="sap-icon://map-2" press="onWhatchSchema" /><Button icon="sap-icon://map" press="onShowMap" tooltip="Show map"/></HBox></f:SimpleForm></l:VerticalLayout></Dialog></core:FragmentDefinition>',
	"zhr237/fragment/SchemaLayer.fragment.xml":'<core:FragmentDefinition\r\n        xmlns="sap.suite.ui.commons.networkgraph"\r\n        xmlns:m="sap.m"\r\n        xmlns:l="sap.ui.layout"\r\n        xmlns:core="sap.ui.core"\t\t\r\n        ><m:Dialog title="{item>/title}"\r\n              afterOpen="_onAfterDialogOpen" resizable="true"><m:buttons><m:Button text="Edit desk" press="handleEditDesk" visible="{item>/editMode}"/><m:Button press="handleDeskChoosed" visible="{= !${item>/editMode}}"\r\n                     text="{item>/chooseText}"\r\n                     enabled="{item>/chooseEnabled}"/><m:Button text="Cancel" press="handleEditCancelButton"/><m:Button text="Align" press="_doAlign" visible="{= ${item>/editMode}}"/></m:buttons><Graph  id="graph"\r\n                    enableWheelZoom="true"\r\n                    enableZoom="true"\r\n                    width="75rem"\r\n                    height="53rem"\r\n                    nodes="{item>/nodes}"\r\n                    selectionChange="onSelectionChange"                  \r\n                    ><nodes><Node\r\n                            key="{item>key}"\r\n                            title="{item>title}"\r\n                            icon="{icon}"                            \r\n                            showActionLinksButton="false"\r\n                            status="{item>status}"\r\n                            x="{item>x}"\r\n                            y="{item>y}" \r\n                            attributes="{path:\'item>attributes\', templateShareable:true}"                           \r\n                            shape="Circle"><attributes><ElementAttribute\r\n                                    label="{item>label}"\r\n                                    value="{item>value}"/></attributes></Node></nodes></Graph></m:Dialog></core:FragmentDefinition>',
	"zhr237/i18n/i18n.properties":'# This is the resource bundle for zhr237\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Hybrid booking system\n\n#YDES: Application description\nappDescription=\r\n#XTIT: Main view title\ntitle=Hybrid booking system',
	"zhr237/i18n/i18n_en.properties":'# This is the resource bundle for zhr237\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Hybrid booking system\n\n#YDES: Application description\nappDescription=\n#XTIT: Main view title\ntitle=Hybrid booking system',
	"zhr237/i18n/i18n_en_GB.properties":'# This is the resource bundle for zhr237\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Hybrid booking system\n\n#YDES: Application description\nappDescription=\n#XTIT: Main view title\ntitle=Hybrid booking system',
	"zhr237/manifest.json":'{"_version":"1.42.0","sap.app":{"id":"zhr237","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.8.1","toolsId":"ca7f9bcd-203a-4ad7-ad0e-8b52053a9848"},"dataSources":{"mainService":{"uri":"/sap/opu/odata/sap/ZC_HR237_BOOKING_CDS/","type":"OData","settings":{"annotations":["annotation"],"localUri":"localService/metadata.xml","odataVersion":"2.0"}},"annotation":{"type":"ODataAnnotation","uri":"annotations/annotation.xml","settings":{"localUri":"annotations/annotation.xml"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.102.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.f":{},"sap.suite.ui.generic.template":{},"sap.ui.comp":{},"sap.ui.generic.app":{},"sap.ui.table":{},"sap.ushell":{},"sap.suite.ui.commons":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"zhr237.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"defaultCountMode":"Inline","metadataUrlParams":{"sap-value-list":"all"}}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"zhr237.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteMain","pattern":":?query:","target":["TargetMain"]}],"targets":{"TargetMain":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Main","viewName":"Main"}}},"rootView":{"viewName":"zhr237.view.App","type":"XML","async":true,"id":"App"}}}',
	"zhr237/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"zhr237/utils/locate-reuse-libs.js":'(function(e){var t=function(e,t){var n=["sap.apf","sap.base","sap.chart","sap.collaboration","sap.f","sap.fe","sap.fileviewer","sap.gantt","sap.landvisz","sap.m","sap.ndc","sap.ovp","sap.rules","sap.suite","sap.tnt","sap.ui","sap.uiext","sap.ushell","sap.uxap","sap.viz","sap.webanalytics","sap.zen"];Object.keys(e).forEach(function(e){if(!n.some(function(t){return e===t||e.startsWith(t+".")})){if(t.length>0){t=t+","+e}else{t=e}}});return t};var n=function(e){var n="";if(e){if(e["sap.ui5"]&&e["sap.ui5"].dependencies){if(e["sap.ui5"].dependencies.libs){n=t(e["sap.ui5"].dependencies.libs,n)}if(e["sap.ui5"].dependencies.components){n=t(e["sap.ui5"].dependencies.components,n)}}if(e["sap.ui5"]&&e["sap.ui5"].componentUsages){n=t(e["sap.ui5"].componentUsages,n)}}return n};var r=function(e){var t=e;return new Promise(function(r,a){$.ajax(t).done(function(e){r(n(e))}).fail(function(){a(new Error("Could not fetch manifest at \'"+e))})})};var a=function(e){if(e){Object.keys(e).forEach(function(t){var n=e[t];if(n&&n.dependencies){n.dependencies.forEach(function(e){if(e.url&&e.url.length>0&&e.type==="UI5LIB"){jQuery.sap.log.info("Registering Library "+e.componentId+" from server "+e.url);jQuery.sap.registerModulePath(e.componentId,e.url)}})}})}};e.registerComponentDependencyPaths=function(e){return r(e).then(function(e){if(e&&e.length>0){var t="/sap/bc/ui2/app_index/ui5_app_info?id="+e;var n=jQuery.sap.getUriParameters().get("sap-client");if(n&&n.length===3){t=t+"&sap-client="+n}return $.ajax(t).done(a)}})}})(sap);var scripts=document.getElementsByTagName("script");var currentScript=document.getElementById("locate-reuse-libs");if(!currentScript){currentScript=document.currentScript}var manifestUri=currentScript.getAttribute("data-sap-ui-manifest-uri");var componentName=currentScript.getAttribute("data-sap-ui-componentName");var useMockserver=currentScript.getAttribute("data-sap-ui-use-mockserver");var bundleResources=function(){jQuery.sap.require("jquery.sap.resources");var e=sap.ui.getCore().getConfiguration().getLanguage();var t=jQuery.sap.resources({url:"i18n/i18n.properties",locale:e});document.title=t.getText("appTitle")};sap.registerComponentDependencyPaths(manifestUri).catch(function(e){jQuery.sap.log.error(e)}).finally(function(){sap.ui.getCore().attachInit(bundleResources);if(componentName&&componentName.length>0){if(useMockserver&&useMockserver==="true"){sap.ui.getCore().attachInit(function(){sap.ui.require([componentName.replace(/\\./g,"/")+"/localService/mockserver"],function(e){e.init();sap.ushell.Container.createRenderer().placeAt("content")})})}else{sap.ui.require(["sap/ui/core/ComponentSupport"]);sap.ui.getCore().attachInit(bundleResources)}}else{sap.ui.getCore().attachInit(function(){sap.ushell.Container.createRenderer().placeAt("content")})}});sap.registerComponentDependencyPaths(manifestUri);',
	"zhr237/view/App.view.xml":'<mvc:View controllerName="zhr237.controller.App"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\n    xmlns="sap.m"><App id="app"></App></mvc:View>\n',
	"zhr237/view/Main.view.xml":'<mvc:View controllerName="zhr237.controller.Main"\n          displayBlock="true"\n          xmlns="sap.uxap"\n          xmlns:m="sap.m"\n\t\t  xmlns:table="sap.ui.table"\n          xmlns:mvc="sap.ui.core.mvc"\n          xmlns:l="sap.ui.layout"\n          xmlns:unified="sap.ui.unified"\n          xmlns:core="sap.ui.core"\n          xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n          xmlns:smartTable="sap.ui.comp.smarttable"><ObjectPageLayout id="main_view"\n\t                  enableLazyLoading="true"\n\t                  upperCaseAnchorBar="false"\n\t                  useIconTabBar="true"\n\t\t\t\t\t  sectionChange="onSectionChange"><headerTitle><ObjectPageDynamicHeaderTitle><breadcrumbs><m:Breadcrumbs currentLocationText="For emergency case only"><m:Link text="Write to support team" press="handleSupportEmail"/></m:Breadcrumbs></breadcrumbs><expandedHeading><m:HBox><m:Title text="{full_name}" wrapping="true"/><m:ObjectMarker type="Favorite" class="sapUiTinyMarginBegin" visible="{is_worker}"/></m:HBox></expandedHeading><snappedHeading><m:FlexBox fitContainer="true" alignItems="Center"><m:Avatar id="avatar_small" class="sapUiTinyMarginEnd"/><m:Title text="{full_name}" wrapping="true"/></m:FlexBox></snappedHeading><expandedContent><m:VBox><m:Text text="{i18n>title}. Assigned roles: {roles_info}"/><m:Text text="Personnel Number: {pernr} {department_txt} ({department}) - {persa_txt} ({persa})"/></m:VBox></expandedContent></ObjectPageDynamicHeaderTitle></headerTitle><headerContent><m:FlexBox wrap="Wrap"><m:Avatar id="avatar_big" class="sapUiTinyMarginEnd" displaySize="L"/><l:VerticalLayout class="sapUiSmallMarginBeginEnd" visible="{= ${nearest_book_info_label}.length > 0}"><m:Text text="Nearest booknig made by {nearest_book_info_label}"/><m:Link text="QR code {nearest_book_info_text}"\n\t\t\t\t\t        press="showQrCode" /></l:VerticalLayout><l:VerticalLayout class="sapUiSmallMarginBeginEnd" visible="{= ${nearest_book_info_label}.length === 0}"><m:MessageStrip text="There is no nearest booking" type="Warning"/></l:VerticalLayout></m:FlexBox></headerContent><sections><ObjectPageSection titleUppercase="false" visible="{= ${is_worker} || ${is_manager} || ${is_admin} }"\n\t\t\t                   id="bookingTab"><customAnchorBarButton><m:Button icon="sap-icon://check-availability"\n\t\t\t\t\t          text="Bookings overview"/></customAnchorBarButton><ObjectPageSubSection><m:PlanningCalendar\n\t\t\t\t\t\t\tid="bookingCalendar" \t\t\t\t\n\t\t\t\t\t\t\trows="{calendar>/persons}"\n\t\t\t\t\t\t\tspecialDates="{path: \'calendar>/specialDates\', templateShareable: true}"     \n\t\t\t\n\t\t\t\t\t\t\tviewKey="Week"\n\t\t\t\t\t\t\tfirstDayOfWeek="1"\n\t\t\t\t\t\t\tstartDateChange="onStartDateChange"\n\t\t\t\t\t\t\tstickyHeader="true"\n\t\t\t\t\t\t\tappointmentsVisualization="Filled"\n\t\t\t\t\t\t\tshowEmptyIntervalHeaders="true"\n\t\t\t\t\t\t\tappointmentSelect="handleAppointmentSelect"\n\t\t\t\t\t\t\tintervalSelect="handleIntervalSelect"><m:toolbarContent><m:ToolbarSpacer width="1rem"/><m:Button text="Create" press=".onBookClick($event, true)" tooltip="Create new booking" /><m:ToggleButton icon="sap-icon://desktop-mobile" press="onPick1Desk" visible="{is_manager}" tooltip="Pick one desk"/><m:ToolbarSpacer  width="2rem" visible="{is_manager}"/><m:ComboBox id="id_pers_area_filter" items="{/ZC_PY000_PersonnelArea}" width="10rem" visible="{is_manager}" selectionChange="onStartDateChange"><core:Item key="{persa}" text="{name1}" /></m:ComboBox><m:Button icon="sap-icon://excel-attachment" text="Schedule" press="showScheduleReport" visible="{is_manager}"/></m:toolbarContent><m:views><m:PlanningCalendarView key="Week" intervalType="Week" description="Week" intervalsS="1" intervalsM="2" intervalsL="7"/><m:PlanningCalendarView key="OneMonth" intervalType="OneMonth" description="Month" intervalsL="31"  /></m:views><m:rows><m:PlanningCalendarRow\n\t\t\t\t\t\t\t\t                    icon="{calendar>avatar}"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle="{calendar>title}"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{calendar>text}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tappointments="{path : \'calendar>bookings\', templateShareable: true}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t><m:appointments><unified:CalendarAppointment\n\t\t\t\t\t\t\t\t\t\t\tstartDate="{calendar>startDate}"\n\t\t\t\t\t\t\t\t\t\t\tendDate="{calendar>endDate}"                            \n\t\t\t\t\t\t\t\t\t\t\ttitle="{calendar>title}"\n\t\t\t\t\t\t\t\t\t\t\ttext="{calendar>text}"\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{calendar>text}"\n\t\t\t\t\t\t\t\t\t\t\ttype="{calendar>type}"\n\t\t\t\t\t\t\t\t\t\t\tcolor="{calendar>color}"\n\t\t\t\t\t\t\t\t\t\t/></m:appointments></m:PlanningCalendarRow></m:rows><m:specialDates><unified:DateTypeRange\n\t\t\t\t\t\t\t\t\t\tstartDate="{calendar>datum}"\n\t\t\t\t\t\t\t\t\t\tendDate="{calendar>datum}"\n\t\t\t\t\t\t\t\t\t\ttooltip="{calendar>tooltip}"\n\t\t\t\t\t\t\t\t\t\ttype="Type02"\n\t\t\t\t\t\t\t\t\t\tsecondaryType="Type03"\n\t\t\t\t\t\t\t\t\t\tcolor="#ED1C24"></unified:DateTypeRange></m:specialDates></m:PlanningCalendar></ObjectPageSubSection></ObjectPageSection><ObjectPageSection id="guardTab"\n\t\t\t                   titleUppercase="false" visible="{is_guard}"><customAnchorBarButton><m:Button icon="sap-icon://validate"\n\t\t\t\t\t          text="Check bookings"/></customAnchorBarButton><ObjectPageSubSection><m:VBox><smartFilterBar:SmartFilterBar id="idCheckBookingFilter" persistencyKey="searchListReportVariant"\n                        entitySet="ZC_HR237_Booking" enableBasicSearch="true" showClearOnFB="true" liveMode="true" showMessages="true"\n                                                     useToolbar="false"><smartFilterBar:layoutData><m:FlexItemData shrinkFactor="1"/></smartFilterBar:layoutData><smartFilterBar:controlConfiguration><smartFilterBar:ControlConfiguration key="pernr" mandatory="notMandatory"/><smartFilterBar:ControlConfiguration key="layer_id" mandatory="notMandatory"/></smartFilterBar:controlConfiguration></smartFilterBar:SmartFilterBar><smartTable:SmartTable id="idCheckBookingTable"\n\t\t\t\t\t                       smartFilterId="idCheckBookingFilter"\n\t\t\t\t\t                       entitySet="ZC_HR237_Booking"\n\t\t\t\t\t                       initiallyVisibleFields="datum,pernr,place_text,layer_id"\n\t\t\t\t\t                       header="Bookings"\n\t\t\t\t\t                       showRowCount="true"\n\t\t\t\t\t                       useExportToExcel="false"\n\t\t\t\t\t                       tableType="ResponsiveTable"\n\t\t\t\t\t                       useTablePersonalisation="false"><smartTable:customToolbar><m:OverflowToolbar id="idCheckBookingToolbar" design="Transparent"></m:OverflowToolbar></smartTable:customToolbar><m:Table sticky="ColumnHeaders,HeaderToolbar,InfoToolbar"></m:Table></smartTable:SmartTable></m:VBox></ObjectPageSubSection></ObjectPageSection><ObjectPageSection id="chartTab"\n\t\t\t                   titleUppercase="false" visible="{= ${is_admin} || ${is_manager} }"><customAnchorBarButton><m:Button icon="sap-icon://business-objects-experience"\n\t\t\t\t\t          text="Statistics"/></customAnchorBarButton><ObjectPageSubSection title=""><m:VBox id="chartVBox"/></ObjectPageSubSection></ObjectPageSection><ObjectPageSection id="notifTab"\n\t\t\t                   titleUppercase="false" visible="{= ${is_manager} }"><customAnchorBarButton><m:Button icon="sap-icon://letter"\n\t\t\t\t\t          text="Notifications"/></customAnchorBarButton><ObjectPageSubSection title=""><m:VBox><smartFilterBar:SmartFilterBar id="idNotifyAllFilter" \n\t\t\t\t\t\t\tentitySet="ZC_HR237_A_Send_Notif_All" enableBasicSearch="true" showClearOnFB="true" liveMode="true" showMessages="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t          useToolbar="false"><smartFilterBar:layoutData><m:FlexItemData shrinkFactor="1"/></smartFilterBar:layoutData><smartFilterBar:controlConfiguration><smartFilterBar:ControlConfiguration key="datum" mandatory="mandatory" filterType="interval" visibleInAdvancedArea="true"  index="1"\n\t\t\t\t\t\t\t\t\t\tconditionType="{\n\t\t\t\t\t\t\t\t\t\t\tmodule: \'sap.ui.comp.config.condition.DateRangeType\',\n\t\t\t\t\t\t\t\t\t\t\tdefaultOperation: \'THISMONTH\'\n\t\t\t\t\t\t\t\t\t\t}"/><smartFilterBar:ControlConfiguration key="layer_id" mandatory="notMandatory" filterType="single"/><smartFilterBar:ControlConfiguration key="custIsNotified" index="2" label="With notified"><smartFilterBar:customControl><m:Switch id="id_is_notified"/></smartFilterBar:customControl></smartFilterBar:ControlConfiguration></smartFilterBar:controlConfiguration></smartFilterBar:SmartFilterBar><smartTable:SmartTable\n\t\t\t\t\t\t\t\tid="idNotifyAllTable"\n\t\t\t\t\t\t\t\tsmartFilterId="idNotifyAllFilter"\n\t\t\t\t\t\t\t\tentitySet="ZC_HR237_A_Send_Notif_All" \n\t\t\t\t\t\t\t\theader="Bookings in period"\n\t\t\t\t\t\t\t\trequestAtLeastFields="department,plans,is_notified"\n\t\t\t\t\t\t\t\tinitiallyVisibleFields="datum,directorate_txt,department_txt,layer_id,place_text,pernr,created_when,user_name"\n\t\t\t\t\t\t\t\tshowRowCount="true"\n\t\t\t\t\t\t\t\ttableType="ResponsiveTable"\n\t\t\t\t\t\t\t\tuseTablePersonalisation="false"\n\t\t\t\t\t\t\t\tbeforeRebindTable="onBeforeRebindNotifyAllTable"\n\t\t\t\t\t\t\t\t><smartTable:customToolbar><m:OverflowToolbar design="Transparent"><m:ToolbarSpacer/><m:Button text="Notify all" icon="sap-icon://email" press="onNotifyAll"/></m:OverflowToolbar></smartTable:customToolbar><m:Table id="idNotifyAllTableInner"\n\t\t\t\t\t\t\t         sticky="ColumnHeaders,HeaderToolbar,InfoToolbar"><m:columns><m:Column><m:customData><core:CustomData key="p13nData" value=\'\\{"columnKey": "edit", "columnIndex": 0}\'/></m:customData><m:Text text="Status"/></m:Column></m:columns><m:items><m:ColumnListItem><m:ObjectStatus\n\t\t\t\t\t\t\t\t\t\t\ticon="{= ${is_notified} ? \'sap-icon://sys-enter-2\': \'sap-icon://information\'}"\n\t\t\t\t\t\t\t\t\t\t\ttext="{= ${is_notified} ? \'Notified\': \'Planned\'}"\n\t\t\t\t\t\t\t\t\t\t\tstate="{= ${is_notified} ? \'Success\': \'Information\'}" /></m:ColumnListItem></m:items></m:Table></smartTable:SmartTable></m:VBox></ObjectPageSubSection></ObjectPageSection><ObjectPageSection id="settingsTab"\n\t\t\t                   titleUppercase="false" visible="{is_admin}"><customAnchorBarButton><m:Button icon="sap-icon://customize"\n\t\t\t\t\t          text="Settings"/></customAnchorBarButton><ObjectPageSubSection title=""><m:VBox><smartTable:SmartTable id="id_settings_table"\n\t\t\t\t\t\t\t                    header="Schemes count"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="ZC_HR237_Layer"\n\t\t\t\t\t\t\t\t\t\t\t\trequestAtLeastFields="layer_id,layer_text"\n\t\t\t\t\t\t\t\t\t\t\t\tinitiallyVisibleFields="layer_address,persa"\n\t\t\t\t\t\t\t\t\t\t\t\tshowRowCount="true"\n\t\t\t\t\t\t\t\t\t\t\t\tuseExportToExcel="true"\n\t\t\t\t\t\t\t\t\t\t\t\ttableType="ResponsiveTable"><smartTable:customToolbar><m:OverflowToolbar design="Transparent"><m:ToolbarSpacer/><m:Button text="Create" press=".handleFormClick($event, \'Layer\', \'NEW\')"/></m:OverflowToolbar></smartTable:customToolbar><m:Table sticky="ColumnHeaders,HeaderToolbar"><m:columns><m:Column visible="true"><m:customData><core:CustomData key="p13nData" value=\'\\{"columnKey": "edit0", "columnIndex": 0}\'/></m:customData><m:Text text="Upload image"/></m:Column><m:Column visible="true"><m:customData><core:CustomData key="p13nData" value=\'\\{"columnKey": "edit1", "columnIndex": 1}\'/></m:customData><m:Text text="Desk positions"/></m:Column><m:Column visible="true"><m:customData><core:CustomData key="p13nData" value=\'\\{"columnKey": "edit2", "columnIndex": 2}\'/></m:customData><m:Text text="Schema"/></m:Column></m:columns><m:items><m:ColumnListItem><m:Link text="Change image" target="{layer_id}" press="uploadImage"></m:Link><m:Link text="Edit desks positions" target="{layer_id}^{layer_text}" press="onEditDeskPosition"></m:Link><m:Link text="{layer_text} ({layer_id})" target="{layer_id}^{layer_text}^{layer_address}^{persa}" press=".handleFormClick($event, \'Layer\', \'EDT\')"></m:Link></m:ColumnListItem></m:items></m:Table></smartTable:SmartTable></m:VBox></ObjectPageSubSection></ObjectPageSection></sections></ObjectPageLayout></mvc:View>'
}});
